<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
  <title>Stencil Component Starter</title>

  <style>

    .carousel {
      /* display: none; */
    }
    .mytest {
      background: #900;
    }

  </style>
</head>
<body>
  <my-component custom-template="false">
    <div class="mytest">teste</div>
    <div class="wrap-carousel">
      <div class="carousel">
        <a class="carousel-item" href="#one!"><img src="https://lorempixel.com/250/250/nature/1"></a>
        <a class="carousel-item" href="#two!"><img src="https://lorempixel.com/250/250/nature/2"></a>
        <a class="carousel-item" href="#three!"><img src="https://lorempixel.com/250/250/nature/3"></a>
        <a class="carousel-item" href="#four!"><img src="https://lorempixel.com/250/250/nature/4"></a>
        <a class="carousel-item" href="#five!"><img src="https://lorempixel.com/250/250/nature/5"></a>
      </div>
    </div>
  </my-component>

  <script>
    var cmp = document.querySelector('my-component');
    defaultArray = [
      {
        url: 'https://lorempixel.com/250/250/nature/1'
      },
      {
        url: "https://lorempixel.com/250/250/nature/1"
      },
      {
        url: "https://lorempixel.com/250/250/nature/1"
      },
      {
        url: "https://lorempixel.com/250/250/nature/1"
      },
      {
        url:"https://lorempixel.com/250/250/nature/1"
      }
    ];
    cmp.first = defaultArray;
    cmp.addEventListener('todoCompleted', event => { onCompletedWC() })

    var options = {
      dist: -100
    };

    function onCompletedWC() {
      if (typeof M === "undefined") {
        console.log("M not defined!");
        return;
      }

      // var carouselTarget = document.querySelector(".carousel");
      var carouselTarget = this.cmp.shadowRoot.querySelector(".carousel");

      var instance = M.Carousel.init(carouselTarget, this.options);

      instance.next(1);

      //change element demonstration
      setTimeout(() => {
        cmp.first[1] = {url: "https://lorempixel.com/250/250/nature/2"};
        cmp.first = [...cmp.first];
        console.log('it should have changed the image');
      },2000)
    }

  </script>

  <script type="module" src="/build/wc-materializecss-carousel.esm.js"></script>
  <script nomodule src="/build/wc-materializecss-carousel.js"></script>

</body>
</html>
